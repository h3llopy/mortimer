version: '3'
services:
  nginx:
    image : nginx:latest
    depends_on:
      - web
    ports :
        - 80:80
        - 443:443
    volumes:
        - ./nginx.conf:/etc/nginx/nginx.conf
        - ./certs:/etc/nginx/ssl
  web:
    image: andrewmc/mortimer_web:0.0.1
    container_name: web
    depends_on:
      - db
    ports:
      - 8069:8069
    volumes:
      - ./addons:/mnt/extra-addons
      - ./data:/mnt/data
      - ./odoo:/etc/odoo
  db:
    image: postgres:10
    environment:
      - POSTGRES_DB=postgres
      - POSTGRES_PASSWORD=odoo
      - POSTGRES_USER=odoo